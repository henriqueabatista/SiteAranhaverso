<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merienda:wght@300..900&display=swap" rel="stylesheet">
    <title>Desvie dos Obstáculos</title>
    <style>
*{
 margin: 0;
 padding: 0;
 box-sizing: border-box;
 font-family:   "Merienda", cursive;
 scroll-behavior: smooth;
}
.container{
    max-width: 1200px;
    margin: auto;
    padding: 20px;
    text-decoration: none;
}
header{
    background-color: rgb(255, 1, 1);
    color: #ffffff;
    padding: 15px;
    width: 100%;
    top: 0;
    position: fixed;
    z-index: 1000;
}
nav ul{
    list-style: none;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
}
nav ul li{
    margin-left: 20px;
}
nav ul li a{
    color: #ffffff;
    text-decoration: none;
}
header .container{
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
}
.logo{
    font-size: 2em;
    font-weight: bold;
}
body {
    padding-top: 120px; /* para o jogo ficar abaixo do header fixo */
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    background-color: #000000;
}

/* Título branco */
h1 {
    color: white;
    margin-bottom: 15px;
}

#game-container {
    position: relative;
    width: 400px;
    height: 600px;
    border: 2px solid #333;
    overflow: hidden;
    background-color: darkgray;
    display: none; /* escondido até iniciar */
}

#player {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 40px;
    border-radius: 5px;
    background-image: url(img/galeria/Miles\ Morales.jpg);
    background-color: #4CAF50;
    background-size: cover;
    background-position: center;
}

.obstacle {
    position: absolute;
    width: 60px;
    height: 60px;
    background-image: url(img/galeria/Rei\ do\ Crime.jpg);
    background-color: #FF5722;
    background-size: cover;
    background-position: center;
}

#info-container {
    margin-top: 20px;
    text-align: center;
    display: none; /* escondido até iniciar */
}
        
#timer {
    font-size: 24px;
    font-weight: bold;
}

button {
    cursor: pointer;
    border: none;
    background-color: #333;
    color: #fff;
    border-radius: 5px;
}

#start-button, #restart-button {
    margin-top: 15px;
    padding: 12px 24px;
    font-size: 18px;
}

#restart-button {
    display: none;
}

/* Controles para mobile */
#controls {
    display: none;
    margin-top: 20px;
    text-align: center;
}
#controls button {
    width: 60px;
    height: 60px;
    margin: 5px;
    font-size: 24px;
    border-radius: 50%;
    border: none;
    background: #333;
    color: #fff;
    cursor: pointer;
}

/* Mostrar controles apenas em telas menores */
@media (max-width: 768px) {
    #controls {
        display: flex;
        justify-content: center;
        gap: 20px;
    }
}
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
               <a href="index.html" style="color:white; text-decoration:none;">Logo</a> 
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="index.html#Sobre">O que é o Aranhaverso</a></li>
                    <li><a href="index.html#Filmes">Filmes</a></li>
                    <li><a href="index.html#Personagens">Personagens</a></li>
                    <li><a href="contato.html">Contato</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <h1>Desvie dos Obstáculos</h1>

    <!-- Botão de início -->
    <button id="start-button">Iniciar Jogo</button>

    <div id="game-container">
        <div id="player"></div>
    </div>
    <div id="info-container">
        <div id="timer">Tempo: 0s</div>
        <button id="restart-button">Jogar Novamente</button>
    </div>

    <!-- Controles para mobile -->
    <div id="controls">
        <button id="left">⬅️</button>
        <button id="right">➡️</button>
    </div>

    <script>
        const gameContainer = document.getElementById('game-container');
        const player = document.getElementById('player');
        const timerDisplay = document.getElementById('timer');
        const restartButton = document.getElementById('restart-button');
        const startButton = document.getElementById('start-button');
        const infoContainer = document.getElementById('info-container');
        const btnLeft = document.getElementById('left');
        const btnRight = document.getElementById('right');

        let isGameOver = false;
        let timer = 0;
        let obstacleSpeed = 2;
        let scoreInterval;
        let obstacleInterval;
        let animationFrameId;
        let playerX = 0; 
        const moveStep = 20;

        function startGame() {
            // Mostrar jogo e info
            gameContainer.style.display = 'block';
            infoContainer.style.display = 'block';
            startButton.style.display = 'none';

            isGameOver = false;
            timer = 0;
            timerDisplay.textContent = `Tempo: 0s`;
            restartButton.style.display = 'none';
            playerX = gameContainer.clientWidth / 2 - 20;
            player.style.left = `${playerX}px`;

            document.querySelectorAll('.obstacle').forEach(obstacle => obstacle.remove());

            scoreInterval = setInterval(updateTimer, 1000);
            obstacleInterval = setInterval(createObstacle, 1000);
        }

        function updateTimer() {
            if (!isGameOver) {
                timer++;
                timerDisplay.textContent = `Tempo: ${timer}s`;
            }
        }

        // Controle com mouse
        document.addEventListener('mousemove', (e) => {
            if (!isGameOver && gameContainer.style.display === 'block') {
                const gameRect = gameContainer.getBoundingClientRect();
                let mouseX = e.clientX - gameRect.left;

                if (mouseX < 20) mouseX = 20;
                if (mouseX > gameRect.width - 20) mouseX = gameRect.width - 20;

                player.style.left = `${mouseX}px`;
                playerX = mouseX;
            }
        });

        // Controles mobile
        btnLeft.addEventListener('click', () => {
            if (!isGameOver) {
                playerX -= moveStep;
                if (playerX < 0) playerX = 0;
                player.style.left = `${playerX}px`;
            }
        });

        btnRight.addEventListener('click', () => {
            if (!isGameOver) {
                playerX += moveStep;
                if (playerX > gameContainer.clientWidth - 40) playerX = gameContainer.clientWidth - 40;
                player.style.left = `${playerX}px`;
            }
        });

        function createObstacle() {
            if (isGameOver) return;

            const obstacle = document.createElement('div');
            obstacle.classList.add('obstacle');
            
            const randomX = Math.random() * (gameContainer.clientWidth - 60);
            obstacle.style.left = `${randomX}px`;
            
            gameContainer.appendChild(obstacle);

            let obstaclePosition = 0;

            function moveObstacle() {
                if (isGameOver) {
                    obstacle.remove();
                    return;
                }

                obstaclePosition += obstacleSpeed;
                obstacle.style.top = `${obstaclePosition}px`;

                const playerRect = player.getBoundingClientRect();
                const obstacleRect = obstacle.getBoundingClientRect();

                if (obstacleRect.bottom >= playerRect.top &&
                    obstacleRect.top <= playerRect.bottom &&
                    obstacleRect.right >= playerRect.left &&
                    obstacleRect.left <= playerRect.right) {
                    
                    gameOver();
                    return;
                }

                if (obstaclePosition > gameContainer.clientHeight) {
                    obstacle.remove();
                } else {
                    animationFrameId = requestAnimationFrame(moveObstacle);
                }
            }
            animationFrameId = requestAnimationFrame(moveObstacle);
        }

        function gameOver() {
            isGameOver = true;
            clearInterval(scoreInterval);
            clearInterval(obstacleInterval);
            cancelAnimationFrame(animationFrameId);
            alert(`Fim de jogo! Seu tempo foi: ${timer} segundos.`);
            restartButton.style.display = 'block';
        }

        restartButton.addEventListener('click', startGame);
        startButton.addEventListener('click', startGame);
    </script>
</body>
</html>
